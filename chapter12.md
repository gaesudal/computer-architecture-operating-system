## 12.1 동기화란

### 동기화의 의미

프로세스들 사이의 수행 시기를 맞추는 것을 의미

- 실행 순서 제어 : 프로세스를 올바른 순서대로 실행하기
- 상호 배제 : 동시에 접근해서는 안 되는 자원에 하나의 프로세스만 접근하게 하기

### 생산자와 소비자 문제

생산자와 소비자는 ‘총합’ 이라는 데이터를 동시에 사용하는데, 소비자가 생산자의 작업이 끝나기도 전에 총합을 수정했고, 생산자가 소비자의 작업이 끝나기도 전에 총합을 수정하면 동기화가 되지않음’

### 공유 자원과 임계 구역

- 공유 자원 : 동시에 실행되는 프로세스들의 전역변수, 파일, 입출력장치, 보조기억장치
- 임계 구역 : 동시에 실행하면 문제가 발생하는 자원에 접근하는 코드 영역
    - 레이스 컨디션 : 잘못된 실행으로 인해 여러 프로세스가 동시 다발적으로 임계 구역의 코드를 실행하여 문제가 발생하는 경우

운영체제의 임계 구역 문제의 세 가지 원칙

- 상호 배제 : 한 프로세스가 임계 구역에 진입했다면 다른 프로세스는 임계 구역에 들어올 수 없다.
- 진행 : 임계 구역에 어떤 프로세스도 진입하지 않았다면 임계 구역에 진입하고자 하는 프로세스는 들어갈 수 있어야한다.
- 유한 대기 : 한 프로세스가 임계 구역에 진입하고 싶다면 그 프로세스는 언젠가 임계 구역에 들어올 수 있어야 한다.

## 12.2 동기화 기법

### 뮤텍스 락

동시에 접근해서는 안되는 자원에 동시에 접근하지 않도록 만드는 도구, 상호 배제를 위한 동기화 도구

- 자물쇠 역할 : 프로세스들이 공유하는 전역 변수 lock
- 임계 구역을 잠구는 역할 : acquire 함수
    - 프로세스가 임계 구역에 진입하기 전에 호출하는 함수
    - 바쁜 대기 : acquire 함수에서 반복적으로 lock을 확인
- 임계 구역의 잠금을 해제하는 역할 : release 함수
    - 임계 구역에서의 작업이 끝나고 호출하는 함수

### 세마포

공유 자원이 여러 개 있는 상황에서도 적용이 가능한 동기화 도구

- 임계 구역에 진입할 수 있는 프로세스의 개수(사용 가능한 공유 자원의 개수)를 나타냄 : 전역 변수 S
- 임계 구역에 들어가도 좋은지, 기다려야 할지를 알려줌 : wait 함수
- 임계 구역 앞에서 기다리는 프로세스에 ‘이제 가도 좋다’고 신호를 줌 : signal 함수

### 모니터

공유 자원과 공유 자원에 접근하기 위한 인터페이스를 묶어서 관리. 프로세스는 반드시 인터페이스를 통해서만 공유 자원에 접근하도록함
모니터를 통해 공유 자원에 접근하고자 하는 프로세스를 큐에 삽입하고, 큐에 삽입된 순서대로 하나씩 공유 자원을 이용하도록 함. 즉, 모니터는 공유 자원을 다루는 인터페이스에 접근하기 위한 큐를 만들고, 모니터 안에 항상 하나의 프로세스만 들어오도록 하여 상호 배제를 위한 동기화 제공

- 특정 조건을 바탕으로 프로세스를 실행하고 일시 중단하기 위해 사용 : 조건 변수