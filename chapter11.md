## 11.1 CPU 스케줄링 개요

운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 기능

### 프로세스 우선순위

- 입출력 집중 프로세스 : 비디오 재생, 디스크 백업작업을 담당하는 프로세스와 같이 입출력 작업이 많은 프로세스, 실행 상태보다 입출력을 위한 대기 상대에 더 많이 머무르게 됨
- CPU 집중 프로세스 : 복잡한 수학 연산, 컴파일, 그래픽 처리 작업을 담당하는 프로세스, 대기 상태보다는 실행 상태에 더 많이 머무르게 됨

### 스케줄링 큐

운영체제가 일일이 모든 프로세스의 PCB를 뒤적거리는 것은 비효율적. CPU를 원하는 프로세스들은 한 두 개가 아니고, CPU를 요구하는 새로운 프로세스는 언제든 생길 수 있기때문

CPU를 사용하고 싶은 프로세스들, 메모리에 적재되고 싶은 프로세스들, 특정 입출력장치를 사용하고 싶은 프로세스들을 모두 줄 세우는 것이 **스케줄링 큐**

즉, 운영체제는 메모리에 적재되고 싶은 프로세스들을 큐에 삽입하여 줄을 세우고, CPU를 이용하고 싶은 프로세스들 또한 큐에 삽입하여 줄을 세우고, 특정 입출력장치를 이용하고 싶은 프로세스들 역시 큐에 삽입하여 줄을 세움.

- 준비 큐 : CPU를 이용하고 싶은 프로세스들이 서는 줄
- 대기 큐  : 입출력장치를 이용하기 위해 대기 상태에 접어든 프로세스들이 서는 줄

### 선점형과 비선점형 스케줄링

- 선점형 스케줄링 : 프로세스가 CPU를 비롯한 자원을 사용하고 있더라도 운영체제가 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스를 비롯한 자원을 사용하고 있더라도 운영체제가 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식, 자원 독점을 마고 프로세스들에 골고루 자원을 배분할 수 있다는 장점이 있지만, 그만큼 문맥 교환 과정에서 오버헤드가 발생할 수 있음
- 비선점형 스케줄링 : 하나의 프로세스가 자원을 사용하고 있다면 그 프로세스가 종료되거나 스스로 대기 상태에 접어들기 저나진 다른 프로세스가 끼어들 수 없는 스케줄링, 문맥 교환에서 발생하는 오버헤드는 선점형 스케줄링보다 적지만, 하나의 프로세스가 자원들 사용 중이라면 당장 자원을 사용해야 하는 상황에서도 무작정 기다려야하여, 모든 프로세스가 골고루 자원을 사용할 수 없다는 단점

## 10.2 CPU 스케줄링 알고리즘

### 스케줄링 알고리즘의 종류

- 선입 선처리 스케줄링 : FCFS 스케줄링, 단순히 준비 큐에 삽입된 순서대로 프로세스들을 처리하는 비선점형 스케줄링 방식. 실행 시간이 짧은 프로세스가 먼저 들어와 실행 시간이 긴 시간을 기다릴 수가 있음. 이런 현상을 **호위 효과**라고함
- 최단 작업 우선 스케줄링 : 호위 효과를 방지하기 위한 스케줄링 방식. SJF 스케줄링이라고함. 비선점형 스케줄링 알고리즘으로 분류되지만, 선점형으로 구현될 수도 있음.
- 라운드 로빈 스케줄링 : 선입 선처리 스케줄링에 타임 슬라이스라는 개념이 더해진 스케줄링 방식. 타임 슬라이스가 지나치게 크면 사실상 선입 선처리 스케줄링과 다를 바 없이 호위 효과가 생기고, 타임 슬라이스가 지나치게 작으면 문맥 교환에 발생하는 비용이 커 CPU는 프로세스를 처리하는 일보다 프로세스를 전환하는 데에 온 힘을 다 쓸 여지가 있음
    - 타임 슬라이스 : 각 프로세스가 CPU를 사용할 수 있는 정해진 시간을 의미
- 최소 잔여 시간 우선 스케줄링 :  SRT 스케줄링. 최단 작업 우선 스케줄링 알고리즘과 라운드 로빈 알고리즘을 합친 스케줄링 방식. 프로세스들은 정해진 타임 슬라이스만큼 CPU를 사용하되, CPU를 사용할 다음 프로세스로는 남아있는 작업 시간이 가장 적은 프로세스가 선택
- 우선순위 스케줄링 : 우선순위를 부여, 가장 높은 우선순위를 가진 프로세스부터 실행. 우선순위가 낮은 프로세스는 실행이 계속해서 연기될 수 있음. 이를 **기아 현상**이라함. 이를 방지하기 위한 대표적인 기법으로 **에이징**이 있음. 오랫동안 대기한 프로세스의 우선순위를 높이는 방식
- 다단계 큐 스케줄링  : 우선순위별로 준비 큐를 여러개 사용하는 스케줄링 방식. 우선순위가 가장 높은 큐에 있는 프로세스들을 먼저 처리하고, 우선순위가 가장 높은 큐가 비어 있으면 그다음 우선순위 큐에 있는 프로세스들을 처리
큐별로 타임슬라이스를 여러 개 지정, 큐마다 다른 스케줄링 알고리즘을 사용할 수 있음.
- 다단계 피드백 큐 스케줄링 : 우선순위로 인하여 다단계 큐 스케줄링에 의해 발생할 수 있는 기아현상때문에 탄생. 프로세스들이 큐 사이를 이동할 수 있음
다단계 피드백 큐 스케줄링 알고리즘은 어떤 프로세스의 CPU 이용 시간이 길면 낮은 우선순위 큐로 이동시킥, 낮은 우선순위 큐에서 너무 오래 기다린다면 높은 우선순위 큐로 이동시킬 수 있는 알고리즘